# DFSS

<img src="https://i.imgur.com/5m7vokU.jpeg" alt="DFSS logo" width=200>

## Description
DNS Firewall Security System is a Firewall system with the ability to protected a device / network with the action of filtering DNS traffic based on several filtering methods. This way it can block DNS traffic it considers malicious and notify the user about it by storing it in the logs. Blocking network in the DNS level allows for a very secure internet experience, because it has the ability to protect a user before it initializes communication with a malicious server and block it when the user's device uses DNS to figure out the IP address of the server.

---
### How it works
As mentioned in the description, the Firewall uses several filtering methods to determine the reliability of a DNS message, those methods are:
- **Database** - The most simple method, which is giving the user the option to add a certain URL to a whitelist or a blacklist, which will accordingly use this to validate or block a DNS message which contains the entered URL no matter what. This also includes the storage of filtering results in a cache collection in the database, which can be used in the same run of the project to make the filtering process more efficient.
- **External URL check** - This is also a very simple method which utilizes the URL field in the DNS protocol. This method receives a large list which contains URLs which are known as malicious and harmful domains. This project uses the project [Blackbook](https://github.com/stamparm/blackbook/) to get said list. This method allows for more reliable and efficient overall filtering process.
- **Phishing** - The last method to use the URL of a DNS message is the phishing method. As the name suggests this method has an algorithm which can detect a phishing attack attempt in a URL and block the DNS request immediately. This method iterates a list of the top 1000 most popular website's URLs, and activates an algorithm which uses regex to determine a potential phishing attack attempt. This project uses the project [URLchecker](https://github.com/bensooter/URLchecker) to get said list.
- **DNSSEC** - The project uses the DNSSEC technology to prevent DNS-Spoofing attacks and Cache-Poisoning to ensure that the DNS traffic between the firewall and the DNS resolver is legitimate and there is no middle-man which tries to interfere with the DNS process of resolving the IP address of a URL. This method takes the DNS request from the user and initiates a DNSSEC communication with the DNS resolver, it takes all the digital certificates needed from the DNSSEC responses, and then uses cryptographic and hash functions to validate the DNSSEC connection and in the end the final IP address result which the firewall got from the DNS resolver.
- **Rebinding attack prevention** - To prevent a rebinding attack where an attacker can make the user initiate a DNS query where the response is a private IP address, meaning the attacker can make the user make a connection with its router, or some other private device which is connected to the same network. This prevention method is quite simple, it looks at the IP address it got from the response of the DNS resolver and check if the IP is a private IP address, which should never be the case in a normal DNS query.
- **DNSCrypt** - This is not a DNS filtering method, but another thing to ensure more security when using the firewall. This project is using a program called [dnscrypt-proxy](https://github.com/DNSCrypt/dnscrypt-proxy), which as it sound it creates another proxy on the device running the firewall, which has the ability to take any DNS request/response and convert it from DNS to DNSCrypt and vise versa. DNSCrypt is an encrypted protocol similar to DNS over HTTPS or DNS over TLS, which makes the whole connection much more secure and makes it harder for a middle man to understand any of the content of the DNS communication.

## Installation
As of the writing of this file, the project requires to build it and run it on a Linux x86, and it works best on Debian based distributions (Tested on Ubuntu). For building the project, it require an external MongoDB drivers for C++, which you can see the installation guide for [here](https://www.mongodb.com/docs/languages/cpp/cpp-driver/current/installation/linux/). After the installation you should run the binary main file and the firewall will run.

## Authors and acknowledgment
This project was made for Magshimim Final Project, and was created by Ilan Markovich and Eitan Attar.
